# 使用した技術

PythonのPelicanを用いてビルドしたページをGithub Actionsでgh-pagesブランチにデプロイさせています。

gh-pagesブランチは，そのままGithub Pagesで公開しています。

Pelicanのテーマはaboutwilsonを独自にカスタマイズしたものを使用しています。

やや強引に改造したため，CSSはインラインです。

# ローカルでの操作方法

ブランチをローカルにクローンしたら，必要なライブラリをインストールします。

仮想環境venvの利用を推奨します。

``` Python
pip install pelican markdown
```

仮想環境を立ち上げるには，以下のコマンドを実行します。

``` Python
pelican -rl
```

本番用のファイル群を生成したいときは，`make publish`で生成できます。

なお，生成したファイル群はoutput/

# ブランチの使い分け

|main|ビルド前のコード置き場|
|writing|執筆途中のコード置き場|
|gh-pages|デプロイ＆公開用|

mainに直接pushしないこと。必ずwritingからマージすること(同時作業による競合を回避するため)。

# 基本的なルールと仕様

記事を書く際は，content/にmarkdownファイルを置くだけでビルド対象になります。

## 記事ファイル

ファイル名はブッキングを防ぐため，「YYYY-MM-DD.md」の形式にしてください。同じ日付で異なるファイルがある場合は，2つ目以降を「YYYY-MM-DD-1.md」のような形式にしてください。

文字コードはUTF-8，改行コードはLFに統一してください。

content/に置く.mdファイルの先頭部分には，メタデータを設置できます。

|データ名|必須|内容|
|---|---|---|
|Title|○|ページのタイトル|
|Date|○|作成した日付とビルド後のHTMLファイル名。半角でYYYY-MM-DDの形式とすること。|
|Tags|○|タグ付け。コンマで複数設定可能。|
|Category|○|カテゴリー分け|
|Auther|×|執筆者。ない場合はTRIと表示される。|

これ以外にもPelicanは指定できるが，CSSの指定外の部分もあるため，基本的に使わないこと。

## 画像について

画像を挿入する場合，content/images/に置き，`![ALT属性(画像の説明)]({filename}images/画像ファイル名)`と呼び出してください。

## Python仮想環境について

Python仮想環境を使用する場合，venvを推奨しています。

仮想環境ファイル名はmyenvとしていますが，これ以外のファイル名にしたい場合は.gitignoreに追記してください。

## その他細かな注意事項

### 表生成の際の注意

PythonのMarkdownを使っているため，GithubのMarkdownとは細かな点で違いがあります。

表を生成する際は，**必ずタイトル行を書いてください**。タイトル行がない場合，バグります。